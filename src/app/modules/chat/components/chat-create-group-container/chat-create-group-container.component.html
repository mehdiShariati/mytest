<div class="w-full h-full relative z-50">
  <div
    class="flex justify-start items-center w-full h-16 absolute z-50 left-0 top-0 p-4 bg-white"
    style="box-shadow: 0px 0px 5px 0 rgba(0, 0, 0, 0.1)"
  >
    <div
      class="flex flex-col justify-center items-center flex-grow-0 flex-shrink-0 h-8 w-8 overflow-hidden p-0.5 rounded-3xl"
    >
      <div
        (click)="toggleCreateGroup()"
        class="flex hover:cursor-pointer justify-center items-center flex-grow-0 flex-shrink-0 w-8 h-8 relative overflow-hidden gap-2 p-3.5 rounded-[22px]"
      >
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="flex-grow-0 flex-shrink-0 w-6 h-6 relative"
          preserveAspectRatio="xMidYMid meet"
        >
          <path
            d="M8.46918 4.21934C8.32873 4.35997 8.24984 4.55059 8.24984 4.74934C8.24984 4.94809 8.32873 5.13871 8.46918 5.27934L15.1892 11.9993L8.46918 18.7193C8.39549 18.788 8.33639 18.8708 8.2954 18.9628C8.2544 19.0548 8.23236 19.1541 8.23059 19.2548C8.22881 19.3555 8.24733 19.4555 8.28505 19.5489C8.32278 19.6423 8.37892 19.7272 8.45014 19.7984C8.52136 19.8696 8.60619 19.9257 8.69958 19.9635C8.79297 20.0012 8.893 20.0197 8.9937 20.0179C9.0944 20.0162 9.19372 19.9941 9.28572 19.9531C9.37771 19.9121 9.46051 19.853 9.52918 19.7793L16.7792 12.5293C16.9196 12.3887 16.9985 12.1981 16.9985 11.9993C16.9985 11.8006 16.9196 11.61 16.7792 11.4693L9.52918 4.21934C9.38855 4.07889 9.19793 4 8.99918 4C8.80043 4 8.6098 4.07889 8.46918 4.21934Z"
            fill="#78A9FF"
          ></path>
        </svg>
      </div>
    </div>
    <div class="flex flex-col justify-start items-start flex-grow gap-1">
      <div
        class="flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 relative gap-1 hover:cursor-pointer"
        (click)="toggleCreateGroup()"
      >
        <p class="flex-grow-0 flex-shrink-0 text-sm text-center text-[#4589ff]">بازگشت</p>
      </div>
    </div>

    <div class="flex flex-col justify-center items-center flex-grow relative">
      <div class="flex justify-center items-center self-stretch flex-grow-0 flex-shrink-0 relative gap-1">
        <p class="flex-grow-0 flex-shrink-0 text-sm text-center text-neutral-800">
          {{ step_number === 1 ? 'انتخاب اعضا' : 'گروه جدید' }}
        </p>
      </div>
      <p *ngIf="step_number === 1" class="flex-grow-0 flex-shrink-0 text-xs text-right text-[#8d8d8d]">۰ از ۱۲۰۰</p>
    </div>

    <div class="flex flex-col justify-start items-end flex-grow gap-1 hover:cursor-pointer" (click)="nextStep()">
      <div class="flex justify-end items-center self-stretch flex-grow-0 flex-shrink-0 relative gap-1">
        <p class="flex-grow-0 flex-shrink-0 text-sm text-center text-[#4589ff]">
          {{ step_number === 1 ? 'مرحله بعد' : 'ساخت گروه' }}
        </p>
      </div>
    </div>
    <div
      (click)="nextStep()"
      class="flex flex-col justify-center items-center flex-grow-0 flex-shrink-0 h-8 w-8 overflow-hidden p-0.5 rounded-3xl hover:cursor-pointer"
    >
      <div
        class="flex justify-center items-center flex-grow-0 flex-shrink-0 w-8 h-8 relative overflow-hidden gap-2 p-3.5 rounded-[22px]"
      >
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="flex-grow-0 flex-shrink-0 w-6 h-6 relative"
          preserveAspectRatio="xMidYMid meet"
        >
          <path
            d="M15.5293 4.21934C15.6698 4.35997 15.7487 4.55059 15.7487 4.74934C15.7487 4.94809 15.6698 5.13871 15.5293 5.27934L8.80934 11.9993L15.5293 18.7193C15.603 18.788 15.6621 18.8708 15.7031 18.9628C15.7441 19.0548 15.7662 19.1541 15.7679 19.2548C15.7697 19.3555 15.7512 19.4555 15.7135 19.5489C15.6757 19.6423 15.6196 19.7272 15.5484 19.7984C15.4772 19.8696 15.3923 19.9257 15.2989 19.9635C15.2055 20.0012 15.1055 20.0197 15.0048 20.0179C14.9041 20.0162 14.8048 19.9941 14.7128 19.9531C14.6208 19.9121 14.538 19.853 14.4693 19.7793L7.21934 12.5293C7.07889 12.3887 7 12.1981 7 11.9993C7 11.8006 7.07889 11.61 7.21934 11.4693L14.4693 4.21934C14.61 4.07889 14.8006 4 14.9993 4C15.1981 4 15.3887 4.07889 15.5293 4.21934Z"
            fill="#78A9FF"
          ></path>
        </svg>
      </div>
    </div>
  </div>
  <ng-container [ngSwitch]="step_number">
    <div
      *ngSwitchCase="1"
      class="flex px-[8rem] flex-col justify-start items-center w-full h-[622px] absolute left-0 top-16 overflow-hidden gap-1 pb-2 rounded-lg bg-white"
    >
      <div class="flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-3 py-4 bg-white">
        <div class="flex justify-center items-center self-stretch flex-grow-0 flex-shrink-0 gap-3 px-3">
          <div class="flex flex-col justify-center items-center flex-grow h-10 overflow-hidden rounded-xl bg-white">
            <div class="flex flex-col justify-center items-end self-stretch flex-grow gap-1">
              <div class="flex flex-col justify-center items-end self-stretch flex-grow gap-2">
                <div
                  class="flex justify-end items-center self-stretch flex-grow gap-4 px-4 py-[15px] rounded-lg bg-[#f4f4f4]"
                >
                  <div class="flex items-center flex-grow relative gap-2">
                    <input
                      placeholder="جستجو"
                      class="flex-grow-0 w-full bg-inherit flex-shrink-0 text-sm text-right text-[#8d8d8d]"
                    />
                    <svg
                      width="16"
                      height="16"
                      viewBox="0 0 16 16"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                      class="flex-grow-0 flex-shrink-0 w-4 h-4 absolute right-12"
                      preserveAspectRatio="xMidYMid meet"
                    >
                      <path
                        d="M6.66658 1.83398C7.57997 1.83387 8.47471 2.09258 9.2471 2.58013C10.0195 3.06768 10.6379 3.76411 11.0307 4.58873C11.4235 5.41335 11.5746 6.3324 11.4665 7.23937C11.3584 8.14635 10.9955 9.00413 10.4199 9.71332L13.6866 12.98C13.7763 13.0691 13.8289 13.1889 13.8338 13.3152C13.8387 13.4415 13.7956 13.565 13.7132 13.6609C13.6307 13.7567 13.515 13.8177 13.3893 13.8317C13.2637 13.8456 13.1374 13.8114 13.0359 13.736L12.9799 13.6873L9.71258 10.4207C9.11183 10.9081 8.40287 11.2442 7.64526 11.4007C6.88766 11.5572 6.10355 11.5296 5.35883 11.3202C4.61411 11.1107 3.93054 10.7256 3.36557 10.1971C2.8006 9.66867 2.37074 9.01231 2.1121 8.28322C1.85347 7.55413 1.77362 6.7736 1.87927 6.00725C1.98492 5.24089 2.27298 4.51108 2.71924 3.87917C3.1655 3.24725 3.75692 2.73169 4.44381 2.3758C5.1307 2.01991 5.89297 1.8341 6.66658 1.83398ZM6.66658 2.83398C6.16318 2.83398 5.66471 2.93314 5.19962 3.12578C4.73454 3.31842 4.31196 3.60078 3.956 3.95674C3.60004 4.3127 3.31768 4.73528 3.12504 5.20036C2.9324 5.66545 2.83324 6.16392 2.83324 6.66732C2.83324 7.17072 2.9324 7.66919 3.12504 8.13427C3.31768 8.59935 3.60004 9.02194 3.956 9.37789C4.31196 9.73385 4.73454 10.0162 5.19962 10.2089C5.66471 10.4015 6.16318 10.5007 6.66658 10.5007C7.68324 10.5007 8.65826 10.0968 9.37715 9.37789C10.096 8.659 10.4999 7.68398 10.4999 6.66732C10.4999 5.65065 10.096 4.67563 9.37715 3.95674C8.65826 3.23785 7.68324 2.83398 6.66658 2.83398Z"
                        fill="#8D8D8D"
                      ></path>
                    </svg>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="flex w-full flex-col divide-y users-container h-50 overflow-y-scroll scrollbar-hide">
        <div
          *ngFor="let user of itemsUsers$ | async"
          class="flex flex-row-reverse justify-start items-center self-stretch flex-grow-0 flex-shrink-0 relative gap-4 px-4 py-2 bg-white"
        >
          <div class="flex flex-col justify-center items-end flex-grow-0 flex-shrink-0 gap-2.5">
            <div class="flex justify-start items-center flex-grow-0 flex-shrink-0 relative gap-1.5">
              <p-checkbox name="selectedUsers" value="{{ user.id }}" [(ngModel)]="selectedUsers"></p-checkbox>
            </div>
          </div>
          <div class="flex flex-col justify-start items-end flex-grow gap-1">
            <div class="flex items-center self-stretch flex-grow-0 flex-shrink-0 relative gap-1">
              <p class="flex-grow-0 flex-shrink-0 text-sm text-center text-neutral-800">
                {{
                  user.personnel?.firstName || user.personnel?.lastName
                    ? user.personnel?.firstName + ' ' + user.personnel?.lastName
                    : user.username
                }}
              </p>
            </div>
            <div class="flex justify-end items-start self-stretch flex-grow-0 flex-shrink-0 relative gap-1">
              <p class="self-stretch flex-grow w-full h-4 text-xs font-medium text-right text-[#8d8d8d]">
                آخرین فعالیت: ۸ ساعت پیش
              </p>
            </div>
          </div>
          <div
            class="flex-grow-0 flex-shrink-0 w-[42px] h-[42px] relative overflow-hidden rounded-3xl bg-cover bg-no-repeat bg-center border border-[#e0e0e0]"
            style="background-image: url('{{
              user.personnel && user.personnel.personnelPhotoUrl
                ? resource_path + user.personnel?.personnelPhotoUrl
                : './assets/dashboard/Avatar.svg'
            }}')"
          ></div>
        </div>
      </div>
    </div>

    <div
      *ngSwitchCase="2"
      class="flex px-[8rem] flex-col justify-start items-center w-full h-[622px] relative gap-4 py-4 bg-white absolute left-0 top-16"
    >
      <input
        type="file"
        class="hidden"
        accept=".gif,.jpg,.jpeg,.png,.svg"
        (change)="onFileSelected($event)"
        #fileUpload
      />
      <p class="self-stretch flex-grow-0 flex-shrink-0 w-full text-sm font-medium text-right text-[#8d8d8d]">
        مشخصات گروه
      </p>
      <div
        class="flex flex-row-reverse items-center self-stretch flex-grow-0 flex-shrink-0 relative gap-6 p-6 rounded-xl bg-[#f4f4f4]"
      >
        <div class="flex justify-center my-2 items-center flex-grow flex-col">
          <p class="self-stretch flex-grow-0 flex-shrink-0 w-full text-xs font-medium text-right text-neutral-600">
            نام گروه
          </p>
          <div class="flex flex-col justify-start items-start flex-grow bg-white w-full rounded">
            <div class="flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 gap-1">
              <div
                class="flex flex-col justify-start items-start self-stretch flex-grow-0 flex-shrink-0 relative gap-2"
              >
                <div
                  class="flex justify-end items-start self-stretch flex-grow-0 flex-shrink-0 h-12 gap-4 px-4 py-[15px] rounded-lg bg-white"
                >
                  <div class="flex justify-start w-full items-start flex-grow h-[18px] relative overflow-hidden gap-4">
                    <input
                      [(ngModel)]="groupName"
                      class="flex-grow w-full h-[18px] text-sm text-right rounded text-neutral-800"
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div
          class="flex-grow-0 flex-shrink-0 w-[64px] h-[64px] relative overflow-hidden rounded-3xl bg-cover bg-no-repeat bg-center border border-[#f4f4f4] cursor-pointer"
          style="background-image: url('{{ imageSrc ? imageSrc : 'assets/icons/chat/fileUpload.svg' }}');"
          (click)="fileUpload.click()"
        ></div>
      </div>
      <p class="self-stretch flex-grow-0 flex-shrink-0 w-full text-sm font-medium text-right text-[#8d8d8d]">
        اعضای گروه
      </p>
      <div class="flex flex-col w-full justify-start items-start flex-grow-0 flex-shrink-0 relative gap-1 divide-y">
        <div
          *ngFor="let user of getSelectedUsers()"
          class="flex flex-row-reverse justify-start items-center flex-grow-0 flex-shrink-0 w-full relative gap-4 py-2 bg-white"
        >
          <svg
            (click)="removeSelectedUser(user.id)"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            class="flex-grow-0 flex-shrink-0 w-6 h-6 relative hover:cursor-pointer"
            preserveAspectRatio="xMidYMid meet"
          >
            <path
              d="M12 1.75C12.8301 1.74995 13.6288 2.06755 14.2322 2.63767C14.8356 3.20779 15.198 3.98719 15.245 4.816L15.25 5H20.5C20.69 5.00006 20.8729 5.07224 21.0118 5.20197C21.1506 5.3317 21.2351 5.5093 21.248 5.69888C21.261 5.88846 21.2015 6.07589 21.0816 6.2233C20.9617 6.37071 20.7902 6.4671 20.602 6.493L20.5 6.5H19.704L18.424 19.52C18.3599 20.1691 18.0671 20.7743 17.598 21.2275C17.1289 21.6806 16.5139 21.9523 15.863 21.994L15.687 22H8.313C7.66046 22 7.02919 21.7679 6.53201 21.3453C6.03482 20.9227 5.70412 20.337 5.599 19.693L5.576 19.519L4.295 6.5H3.5C3.31876 6.49999 3.14366 6.43436 3.00707 6.31523C2.87048 6.19611 2.78165 6.03155 2.757 5.852L2.75 5.75C2.75001 5.56876 2.81564 5.39366 2.93477 5.25707C3.05389 5.12048 3.21845 5.03165 3.398 5.007L3.5 5H8.75C8.75 4.13805 9.09241 3.3114 9.7019 2.7019C10.3114 2.09241 11.138 1.75 12 1.75ZM18.197 6.5H5.802L7.069 19.372C7.09705 19.6592 7.22362 19.9279 7.42722 20.1324C7.63082 20.3369 7.89892 20.4647 8.186 20.494L8.313 20.5H15.687C16.287 20.5 16.796 20.075 16.912 19.498L16.932 19.372L18.196 6.5H18.197ZM13.75 9.25C13.9312 9.25001 14.1063 9.31564 14.2429 9.43477C14.3795 9.55389 14.4684 9.71845 14.493 9.898L14.5 10V17C14.4999 17.19 14.4278 17.3729 14.298 17.5118C14.1683 17.6506 13.9907 17.7351 13.8011 17.748C13.6115 17.761 13.4241 17.7015 13.2767 17.5816C13.1293 17.4617 13.0329 17.2902 13.007 17.102L13 17V10C13 9.80109 13.079 9.61032 13.2197 9.46967C13.3603 9.32902 13.5511 9.25 13.75 9.25ZM10.25 9.25C10.4312 9.25001 10.6063 9.31564 10.7429 9.43477C10.8795 9.55389 10.9684 9.71845 10.993 9.898L11 10V17C10.9999 17.19 10.9278 17.3729 10.798 17.5118C10.6683 17.6506 10.4907 17.7351 10.3011 17.748C10.1115 17.761 9.92411 17.7015 9.7767 17.5816C9.62929 17.4617 9.5329 17.2902 9.507 17.102L9.5 17V10C9.5 9.80109 9.57902 9.61032 9.71967 9.46967C9.86032 9.32902 10.0511 9.25 10.25 9.25ZM12 3.25C11.5608 3.25002 11.1377 3.41517 10.8146 3.71268C10.4915 4.01019 10.2921 4.4183 10.256 4.856L10.25 5H13.75C13.75 4.53587 13.5656 4.09075 13.2374 3.76256C12.9092 3.43437 12.4641 3.25 12 3.25Z"
              fill="#8D8D8D"
            ></path>
          </svg>
          <div class="flex flex-col justify-start items-end flex-grow gap-1">
            <div class="flex items-center self-stretch flex-grow-0 flex-shrink-0 relative gap-1">
              <p class="flex-grow-0 flex-shrink-0 text-sm text-center text-neutral-800">
                {{
                  user.personnel?.firstName || user.personnel?.lastName
                    ? user.personnel?.firstName + ' ' + user.personnel?.lastName
                    : user.username
                }}
              </p>
            </div>
            <div class="flex justify-end items-start self-stretch flex-grow-0 flex-shrink-0 relative gap-1">
              <p class="self-stretch flex-grow w-full h-4 text-xs font-medium text-right text-[#8d8d8d]">
                آخرین فعالیت: ۸ ساعت پیش
              </p>
            </div>
          </div>
          <div
            class="flex-grow-0 flex-shrink-0 w-[42px] h-[42px] relative overflow-hidden rounded-3xl bg-cover bg-no-repeat bg-center border border-[#e0e0e0]"
            style="background-image: url('{{
              user.personnel && user.personnel.personnelPhotoUrl
                ? resource_path + user.personnel?.personnelPhotoUrl
                : './assets/dashboard/Avatar.svg'
            }}')"
          ></div>
        </div>
      </div>
    </div>
  </ng-container>
</div>
